// ==UserScript==
// @name         LTR for Mobile Input
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Sets text direction to left-to-right for inputs with name="mobile"
// @author       Rayan Refoua
// @match        https://panel.drhanasabzadeh.ir/*
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    // Select the input element by name
    var mobileInput = document.querySelector('input[name="mobile"]');

    // Check if the input element exists
    if (mobileInput) {
        // Set the direction to LTR
        mobileInput.style.direction = 'ltr';
        mobileInput.style.fontFamily = "'Roboto Mono', monospace";
        mobileInput.style.fontSize = '20px';

    }

    // Check the input value every second
    setInterval(checkAndConvertInputValue, 1000);


    // Function to convert Persian/Arabic/Hindi digits to English digits
    function convertToEnglishDigits(value) {
        const persianDigits = "۰۱۲۳۴۵۶۷۸۹";
        const arabicDigits = "٠١٢٣٤٥٦٧٨٩";
        const hindiDigits = "०१२३४५६७८९";
        let englishValue = "";

        for (let char of value) {
            if (persianDigits.indexOf(char) !== -1) {
                englishValue += persianDigits.indexOf(char);
            } else if (arabicDigits.indexOf(char) !== -1) {
                englishValue += arabicDigits.indexOf(char);
            } else if (hindiDigits.indexOf(char) !== -1) {
                englishValue += hindiDigits.indexOf(char);
            } else {
                englishValue += char;
            }
        }

        return englishValue.replace(/\s/g, ''); // Remove any spaces
    }

    // Function to check and update the input value
    function checkAndConvertInputValue() {
        const inputElement = document.querySelector('input[name="mobile"]');
        if (inputElement) {
            const currentValue = inputElement.value;
            const newValue = convertToEnglishDigits(currentValue);
            if (currentValue !== newValue) {
                inputElement.value = newValue;
            }
        }
    }


    // Wait until the DOM is fully loaded
    window.addEventListener('load', function() {
        // Find all elements with an onclick attribute containing window.open
        var elements = document.querySelectorAll('[onclick*="window.open"]');
        elements.forEach(function(element) {
            // Extract the URL from the onclick attribute
            var onclickAttr = element.getAttribute('onclick');
            var urlMatch = onclickAttr.match(/window\.open\('([^']+)'/);
            if (urlMatch && urlMatch[1]) {
                var url = urlMatch[1];

                // Create a new hyperlink element
                var hyperlink = document.createElement('a');
                hyperlink.href = url;
                hyperlink.className = element.className; // Copy the classes
                hyperlink.innerHTML = element.innerHTML; // Copy the inner content

                // Replace the original element with the hyperlink
                element.parentNode.replaceChild(hyperlink, element);
            }
        });
    }, false);

        // Function to add the class "menu-item-open" to elements if not already present
    function addMenuItemOpenClass() {
        var elements = document.querySelectorAll('.menu-item.menu-item-submenu');
        elements.forEach(function(element) {
            if (!element.classList.contains('menu-item-open')) {
                element.classList.add('menu-item-open');
            }
        });
    }

    // Add the class to all matching elements when the page loads
    window.addEventListener('load', addMenuItemOpenClass, false);


})();
